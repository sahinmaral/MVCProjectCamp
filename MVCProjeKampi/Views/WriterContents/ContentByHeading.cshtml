@using EntityLayer.Concrete
@using PagedList
@using PagedList.Mvc

@model PagedList.IPagedList<Content>

@{
    ViewBag.Title = "ContentByHeading";
    Layout = "~/Views/Shared/_WriterLayout.cshtml";
    string content = "";
}


<!DOCTYPE html>
<html>
<body class="hold-transition sidebar-mini">
    <!-- Site wrapper -->
    <!--<div class="wrapper">
        <section class="content">
            <div class="container-fluid">-->
    <!-- Timelime example  -->
    <!--<div class="row">
        <div class="col-md-12">-->
    <!-- The time line -->
    <!--<div class="timeline">
        @foreach (var item in Model)
        {
            <div class="time-label">
                <span class="bg-success">
                    @item.ContentDate.ToShortDateString() <br />
                    @item.ContentDate.ToShortTimeString()
                </span>
            </div>
            <div>
                <i class="fas fa-comment bg-yellow"></i>
                <div class="timeline-item">
                    <h3 class="timeline-header"><a href="#">Başlık : </a> @item.Heading.HeadingName</h3>
                    <div class="timeline-body">
                        @item.ContentText
                    </div>
                </div>
            </div>
        }-->
    <!-- END timeline item -->
    <!--</div>
    </div>-->
    <!-- /.col -->
    <!--</div>
    </div>-->
    <!-- /.timeline -->
    <!--</section>-->
    <!-- /.content -->
    <!--</div>-->
    <!-- ./wrapper -->

@Html.PagedListPager((IPagedList)Model,
    p => Url.Action("ContentByHeading",
        new { p })
    ,
    new PagedListRenderOptions
    {
        LiElementClasses = new List<string>
        {
            {"page-link"}
        },
        UlElementClasses = new List<string>
        {
            {"pagination justify-content"}
        }
    }
    )

    <div class="row">
        @foreach (var item in Model)
        {
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-header">
                        Başlık : <b>@item.Heading.HeadingName</b> <br />
                        Tarih ve Saat : <b>@item.ContentDate.ToShortDateString() @item.ContentDate.ToShortTimeString()</b>
                    </div>
                    <div class="card-body">
                        @{
                            if (item.ContentText.Length > 50)
                            {
                                content = item.ContentText.Substring(0, 50) + "...";
                            }
                            else
                            {
                                content = item.ContentText;
                            }
                        }
                        <p class="card-text">@content</p>
                    </div>

                    @*Başlıkta yorumun direkt üstüne gelmesi ayarlanabilir*@

                    <a href="/Headings/HeadingByHeadingId/@item.HeadingId" class="btn btn-primary">Başlığa git</a>
                </div>
            </div>
        }
    </div>



</body>
</html>

